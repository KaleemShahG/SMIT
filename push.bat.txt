@echo off
REM ==============================================
REM Daily Git Push Script by Kaleem
REM ==============================================

REM Go to the folder where this script is located
cd /d "%~dp0"

REM Check if this folder has a .git directory
if not exist .git (
    echo ❌ Error: .git folder not found here.
    echo Please run this script from your SMIT Git folder.
    pause
    exit /b
)

REM Check if there are any changes
git status --porcelain > "%TEMP%\git_status.txt"
set HAS_CHANGES=
for /f %%i in ('type "%TEMP%\git_status.txt"') do set HAS_CHANGES=1

if not defined HAS_CHANGES (
    echo ✅ No new changes to commit.
    pause
    exit /b
)

REM Add all changes
git add .

REM Create a commit message with date and time
for /f "tokens=1-4 delims=/ " %%a in ("%date%") do set DATE=%%a-%%b-%%c
set MSG=Daily update - %DATE% %TIME%

REM Commit the changes
git commit -m "%MSG%"
if errorlevel 1 (
    echo ⚠️ Nothing to commit or commit failed.
    pause
    exit /b
)

REM Push to GitHub (main branch)
git push origin main
if errorlevel 1 (
    echo ❌ Push failed. Check your internet or authentication.
    pause
    exit /b
)

echo ✅ Successfully pushed to GitHub!
pause
